"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=arguments,n=function(n){var r=null!=t[n]?t[n]:{};n%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))},r=1;r<arguments.length;r++)n(r);return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function addVibrations(){document.querySelectorAll(".gamecontroller__container button").forEach((function(e){e.addEventListener("click",(function(){navigator.vibrate(10)}))}))}function toggleFullscreen(){var e=!1,t=document.documentElement;document.getElementById("fullscreen").addEventListener("click",(function(){(e=!e)?t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen():document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}))}function createElement(e){var t,n=document.createElement(e.type);return null===(t=e.attributes)||void 0===t||t.forEach((function(e){var t;"classes"===e[0]?(t=n.classList).add.apply(t,_toConsumableArray(e[1])):n.setAttribute(e[0],e[1])})),n.textContent=e.text,n}function emitEvent(e,t){window.dispatchEvent(new CustomEvent(e,{detail:_objectSpread(_objectSpread({},t),{},{controller:this}),bubbles:!0}))}var _4_TEXT={1:"Y",2:"X",3:"B",4:"A"},_2_TEXT={1:"A",2:"B"},GameController=function(){function e(t,n){var r=this;_classCallCheck(this,e),_defineProperty(this,"attachEventHandlers",(function(){r.refs.ancillaries.fullscreen.addEventListener("click",(function(){this.hooks.fullscreen&&this.hooks.fullscreen(this),emitEvent.call(this,"gamecontroller:ancillary:fullscreen")})),r.refs.ancillaries.select.addEventListener("click",(function(){this.hooks.select&&this.hooks.select(this),emitEvent.call(this,"gamecontroller:ancillary:select")})),r.refs.ancillaries.start.addEventListener("click",(function(){this.hooks.start&&this.hooks.start(this),emitEvent.call(this,"gamecontroller:ancillary:start")})),r.refs.dpad.up.addEventListener("click",(function(){this.hooks.up&&this.hooks.up(this),emitEvent.call(this,"gamecontroller:dpad:up")})),r.refs.dpad.right.addEventListener("click",(function(){this.hooks.right&&this.hooks.right(this),emitEvent.call(this,"gamecontroller:dpad:right")})),r.refs.dpad.down.addEventListener("click",(function(){this.hooks.down&&this.hooks.down(this),emitEvent.call(this,"gamecontroller:dpad:down")})),r.refs.dpad.left.addEventListener("click",(function(){this.hooks.left&&this.hooks.left(this),emitEvent.call(this,"gamecontroller:dpad:left")})),r.refs.actions.buttons.forEach((function(e,t){e.addEventListener("click",(function(){var e=2===r.actions?_2_TEXT[t+1]:_4_TEXT[t+1];r.hooks[e]&&r.hooks[e](r),emitEvent.call(r,"gamecontroller:action:".concat(2===r.actions?_2_TEXT[t+1]:_4_TEXT[t+1]))}))}))})),this.root=document.querySelector(t),this.actions=(null==n?void 0:n.actions)||2,this.refs={},this.hooks=n.hooks||{}}return _createClass(e,[{key:"createContainer",value:function(){this.refs.container=createElement({type:"div",attributes:[["classes",["gamecontroller__container"]]]})}},{key:"createStage",value:function(){this.refs.stage=createElement({type:"div",attributes:[["classes",["gamecontroller__stage"]]]})}},{key:"createAncillaries",value:function(){this.refs.ancillaries={container:createElement({type:"div",attributes:[["classes",["gamecontroller__ancillaries"]]]}),fullscreen:createElement({type:"button",attributes:[["classes",["gamecontroller__ancillary-btn"]],["type","button"],["id","fullscreen"]],text:"fullscreen"}),select:createElement({type:"button",attributes:[["classes",["gamecontroller__ancillary-btn"]],["type","button"]],text:"select"}),start:createElement({type:"button",attributes:[["classes",["gamecontroller__ancillary-btn"]],["type","button"]],text:"start"})}}},{key:"createMainControlsContainer",value:function(){this.refs.mainControls=createElement({type:"div",attributes:[["classes",["gamecontroller__main-controls"]]]})}},{key:"createDPad",value:function(){this.refs.dpad={container:createElement({type:"div",attributes:[["classes",["gamecontroller__d-pad-container"]]]}),up:createElement({type:"button",attributes:[["classes",["gamecontroller__d-pad-btn","gamecontroller__d-pad-btn--up"]]]}),right:createElement({type:"button",attributes:[["classes",["gamecontroller__d-pad-btn","gamecontroller__d-pad-btn--right"]]]}),down:createElement({type:"button",attributes:[["classes",["gamecontroller__d-pad-btn","gamecontroller__d-pad-btn--down"]]]}),left:createElement({type:"button",attributes:[["classes",["gamecontroller__d-pad-btn","gamecontroller__d-pad-btn--left"]]]})},this.refs.dpad.container.appendChild(this.refs.dpad.up),this.refs.dpad.container.appendChild(this.refs.dpad.left),this.refs.dpad.container.appendChild(this.refs.dpad.right),this.refs.dpad.container.appendChild(this.refs.dpad.down),this.refs.mainControls.appendChild(this.refs.dpad.container)}},{key:"createActions",value:function(){var e=this;this.refs.actions.buttons=new Array(this.actions).fill().map((function(t,n){return createElement({type:"button",attributes:[["classes",["gamecontroller__action-btn","gamecontroller__action-btn--".concat(n+1)]]],text:2===e.actions?_2_TEXT[n+1]:_4_TEXT[n+1]})})),this.refs.actions.buttons.forEach((function(t){e.refs.actions.actionsContainer.appendChild(t)}))}},{key:"createActionsContainer",value:function(){this.refs.actions={},this.refs.actions.actionsContainer=createElement({type:"div",attributes:[["classes",["gamecontroller__actions","".concat(2===this.actions?"gamecontroller__actions--two":"gamecontroller__actions--four")]]]})}},{key:"createAllElements",value:function(){this.createContainer(),this.createStage(),this.createAncillaries(),this.createMainControlsContainer(),this.createDPad(),this.createActionsContainer(),this.createActions()}},{key:"insertAllElements",value:function(){this.refs.container.appendChild(this.refs.stage),this.refs.ancillaries.container.appendChild(this.refs.ancillaries.fullscreen),this.refs.ancillaries.container.appendChild(this.refs.ancillaries.select),this.refs.ancillaries.container.appendChild(this.refs.ancillaries.start),this.refs.container.appendChild(this.refs.ancillaries.container),this.refs.container.appendChild(this.refs.mainControls),this.refs.mainControls.appendChild(this.refs.actions.actionsContainer)}},{key:"render",value:function(){this.createAllElements(),this.insertAllElements(),this.root.appendChild(this.refs.container),this.attachEventHandlers()}}]),e}(),actions=2;function createController(){var e=new GameController("#app",{actions:actions,hooks:{X:function(e){console.log("X hook",e)}}});document.getElementById("app").innerHTML="",e.render(),addVibrations(),document.getElementById("fullscreen").addEventListener("click",toggleFullscreen),document.querySelector(".gamecontroller__stage").addEventListener("click",(function(){console.log("click"),actions=2===actions?4:2,createController()}))}document.addEventListener("DOMContentLoaded",(function(){createController()}));
//# sourceMappingURL=index.6d54e6c7.js.map
