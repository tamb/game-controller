{"mappings":"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","sources":["src/index.js"],"sourcesContent":["function addVibrations() {\r\n  const buttons = document.querySelectorAll(\r\n    \".game-controller__container button\"\r\n  );\r\n  buttons.forEach((button) => {\r\n    button.addEventListener(\"click\", () => {\r\n      navigator.vibrate(10);\r\n    });\r\n  });\r\n}\r\n\r\nfunction toggleFullscreen() {\r\n  var fullscreen = false;\r\n\r\n  var elem = document.documentElement;\r\n\r\n  document.getElementById(\"fullscreen\").addEventListener(\"click\", function () {\r\n    fullscreen = !fullscreen;\r\n    fullscreen ? openFullscreen() : closeFullscreen();\r\n  });\r\n\r\n  /* View in fullscreen */\r\n  function openFullscreen() {\r\n    if (elem.requestFullscreen) {\r\n      elem.requestFullscreen();\r\n    } else if (elem.webkitRequestFullscreen) {\r\n      /* Safari */\r\n      elem.webkitRequestFullscreen();\r\n    } else if (elem.msRequestFullscreen) {\r\n      /* IE11 */\r\n      elem.msRequestFullscreen();\r\n    }\r\n  }\r\n\r\n  /* Close fullscreen */\r\n  function closeFullscreen() {\r\n    if (document.exitFullscreen) {\r\n      document.exitFullscreen();\r\n    } else if (document.webkitExitFullscreen) {\r\n      /* Safari */\r\n      document.webkitExitFullscreen();\r\n    } else if (document.msExitFullscreen) {\r\n      /* IE11 */\r\n      document.msExitFullscreen();\r\n    }\r\n  }\r\n}\r\n\r\n//Todo - create elementCreator\r\n\r\nfunction createElement(obj) {\r\n  const el = document.createElement(obj.type);\r\n  obj.attributes?.forEach((attrTuple) => {\r\n    if (attrTuple[0] === \"classes\") {\r\n      el.classList.add(...attrTuple[1]);\r\n    } else {\r\n      el.setAttribute(attrTuple[0], attrTuple[1]);\r\n    }\r\n  });\r\n  el.textContent = obj.text;\r\n\r\n  return el;\r\n}\r\n\r\nfunction emitEvent(name, data) {\r\n  window.dispatchEvent(\r\n    new CustomEvent(name, {\r\n      detail: {\r\n        ...data,\r\n        controller: this,\r\n      },\r\n      bubbles: true,\r\n    })\r\n  );\r\n}\r\n\r\nconst _4_TEXT = {\r\n  1: \"Y\",\r\n  2: \"X\",\r\n  3: \"B\",\r\n  4: \"A\",\r\n};\r\n\r\nconst _2_TEXT = {\r\n  1: \"A\",\r\n  2: \"B\",\r\n};\r\n\r\n// TODO: refactor to use\r\n// DocumentFragments, eventListeners for hooks, custom events, render Attributes, custom button text\r\nclass GameController {\r\n  constructor(query, config) {\r\n    this.root = document.querySelector(query);\r\n    this.actions = config?.actions || 2;\r\n    this.refs = {};\r\n  }\r\n\r\n  attachEventHandlers = () => {\r\n    this.refs.ancillaries.fullscreen.addEventListener(\"click\", function () {\r\n      emitEvent.call(this, \"gamecontroller:ancillary:fullscreen\");\r\n    });\r\n    this.refs.ancillaries.select.addEventListener(\"click\", function () {\r\n      emitEvent.call(this, \"gamecontroller:ancillary:select\");\r\n    });\r\n    this.refs.ancillaries.start.addEventListener(\"click\", function () {\r\n      emitEvent.call(this, \"gamecontroller:ancillary:start\");\r\n    });\r\n    this.refs.dpad.up.addEventListener(\"click\", function () {\r\n      emitEvent.call(this, \"gamecontroller:dpad:up\");\r\n    });\r\n    this.refs.dpad.right.addEventListener(\"click\", function () {\r\n      emitEvent.call(this, \"gamecontroller:dpad:right\");\r\n    });\r\n    this.refs.dpad.down.addEventListener(\"click\", function () {\r\n      emitEvent.call(this, \"gamecontroller:dpad:down\");\r\n    });\r\n    this.refs.dpad.left.addEventListener(\"click\", function () {\r\n      emitEvent.call(this, \"gamecontroller:dpad:left\");\r\n    });\r\n\r\n    this.refs.actions.buttons.forEach((btn, i) => {\r\n      btn.addEventListener(\"click\", () => {\r\n        emitEvent.call(this, \r\n          `gamecontroller:action:${\r\n            this.actions === 2 ? _2_TEXT[i + 1] : _4_TEXT[i + 1]\r\n          }`\r\n        );\r\n      });\r\n    });\r\n  }\r\n\r\n  createContainer() {\r\n    this.refs.container = createElement({\r\n      type: \"div\",\r\n      attributes: [[\"classes\", [\"game-controller__container\"]]],\r\n    });\r\n  }\r\n\r\n  createStage() {\r\n    this.refs.stage = createElement({\r\n      type: \"div\",\r\n      attributes: [[\"classes\", [\"game-controller__stage\"]]],\r\n    });\r\n  }\r\n\r\n  createAncillaries() {\r\n    this.refs.ancillaries = {\r\n      container: createElement({\r\n        type: \"div\",\r\n        attributes: [[\"classes\", [\"game-controller__ancillaries\"]]],\r\n      }),\r\n      fullscreen: createElement({\r\n        type: \"button\",\r\n        attributes: [\r\n          [\"classes\", [\"game-controller__ancillary-btn\"]],\r\n          [\"type\", \"button\"],\r\n          [\"id\", \"fullscreen\"],\r\n        ],\r\n        text: \"fullscreen\",\r\n      }),\r\n      select: createElement({\r\n        type: \"button\",\r\n        attributes: [\r\n          [\"classes\", [\"game-controller__ancillary-btn\"]],\r\n          [\"type\", \"button\"],\r\n        ],\r\n        text: \"select\",\r\n      }),\r\n      start: createElement({\r\n        type: \"button\",\r\n        attributes: [\r\n          [\"classes\", [\"game-controller__ancillary-btn\"]],\r\n          [\"type\", \"button\"],\r\n        ],\r\n        text: \"start\",\r\n      }),\r\n    };\r\n  }\r\n\r\n  createMainControlsContainer() {\r\n    this.refs.mainControls = createElement({\r\n      type: \"div\",\r\n      attributes: [[\"classes\", [\"game-controller__main-controls\"]]],\r\n    });\r\n  }\r\n\r\n  createDPad() {\r\n    this.refs.dpad = {\r\n      container: createElement({\r\n        type: \"div\",\r\n        attributes: [[\"classes\", [\"game-controller__d-pad-container\"]]],\r\n      }),\r\n      up: createElement({\r\n        type: \"button\",\r\n        attributes: [\r\n          [\r\n            \"classes\",\r\n            [\"game-controller__d-pad-btn\", \"game-controller__d-pad-btn--up\"],\r\n          ],\r\n        ],\r\n      }),\r\n      right: createElement({\r\n        type: \"button\",\r\n        attributes: [\r\n          [\r\n            \"classes\",\r\n            [\"game-controller__d-pad-btn\", \"game-controller__d-pad-btn--right\"],\r\n          ],\r\n        ],\r\n      }),\r\n      down: createElement({\r\n        type: \"button\",\r\n        attributes: [\r\n          [\r\n            \"classes\",\r\n            [\"game-controller__d-pad-btn\", \"game-controller__d-pad-btn--down\"],\r\n          ],\r\n        ],\r\n      }),\r\n      left: createElement({\r\n        type: \"button\",\r\n        attributes: [\r\n          [\r\n            \"classes\",\r\n            [\"game-controller__d-pad-btn\", \"game-controller__d-pad-btn--left\"],\r\n          ],\r\n        ],\r\n      }),\r\n    };\r\n\r\n    this.refs.dpad.container.appendChild(this.refs.dpad.up);\r\n    this.refs.dpad.container.appendChild(this.refs.dpad.left);\r\n    this.refs.dpad.container.appendChild(this.refs.dpad.right);\r\n    this.refs.dpad.container.appendChild(this.refs.dpad.down);\r\n    this.refs.mainControls.appendChild(this.refs.dpad.container);\r\n  }\r\n\r\n  createActions() {\r\n    this.refs.actions.buttons = new Array(this.actions).fill().map((x, i) => {\r\n      return createElement({\r\n        type: \"button\",\r\n        attributes: [\r\n          [\r\n            \"classes\",\r\n            [\r\n              \"game-controller__action-btn\",\r\n              `game-controller__action-btn--${i + 1}`,\r\n            ],\r\n          ],\r\n        ],\r\n        text: this.actions === 2 ? _2_TEXT[i + 1] : _4_TEXT[i + 1],\r\n      });\r\n    });\r\n\r\n    this.refs.actions.buttons.forEach((btn) => {\r\n      this.refs.actions.actionsContainer.appendChild(btn);\r\n    });\r\n  }\r\n\r\n  createActionsContainer() {\r\n    this.refs.actions = {};\r\n    this.refs.actions.actionsContainer = createElement({\r\n      type: \"div\",\r\n      attributes: [\r\n        [\r\n          \"classes\",\r\n          [\r\n            \"game-controller__actions\",\r\n            `${\r\n              this.actions === 2\r\n                ? \"game-controller__actions--two\"\r\n                : \"game-controller__actions--four\"\r\n            }`,\r\n          ],\r\n        ],\r\n      ],\r\n    });\r\n  }\r\n\r\n  createAllElements() {\r\n    this.createContainer();\r\n    this.createStage();\r\n    this.createAncillaries();\r\n    this.createMainControlsContainer();\r\n    this.createDPad();\r\n    this.createActionsContainer();\r\n    this.createActions();\r\n  }\r\n\r\n  insertAllElements() {\r\n    // once all refs are made, then append in order\r\n    this.refs.container.appendChild(this.refs.stage);\r\n    this.refs.ancillaries.container.appendChild(\r\n      this.refs.ancillaries.fullscreen\r\n    );\r\n    this.refs.ancillaries.container.appendChild(this.refs.ancillaries.select);\r\n    this.refs.ancillaries.container.appendChild(this.refs.ancillaries.start);\r\n    this.refs.container.appendChild(this.refs.ancillaries.container);\r\n    this.refs.container.appendChild(this.refs.mainControls);\r\n    this.refs.mainControls.appendChild(this.refs.actions.actionsContainer);\r\n  }\r\n\r\n  render() {\r\n    this.createAllElements();\r\n    this.insertAllElements();\r\n    this.root.appendChild(this.refs.container);\r\n    this.attachEventHandlers();\r\n  }\r\n}\r\n\r\nvar actions = 2;\r\nfunction createController() {\r\n  const controller = new GameController(\"#app\", { actions });\r\n  const app = document.getElementById(\"app\");\r\n  app.innerHTML = \"\";\r\n  controller.render();\r\n  addVibrations();\r\n  document\r\n    .getElementById(\"fullscreen\")\r\n    .addEventListener(\"click\", toggleFullscreen);\r\n  document\r\n    .querySelector(\".game-controller__stage\")\r\n    .addEventListener(\"click\", function () {\r\n      console.log(\"click\");\r\n      if (actions == 2) {\r\n        actions = 4;\r\n      } else {\r\n        actions = 2;\r\n      }\r\n      createController();\r\n    });\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n  createController();\r\n});\r\n"],"names":["addVibrations","document","querySelectorAll","forEach","button","addEventListener","navigator","vibrate","toggleFullscreen","fullscreen","elem","documentElement","getElementById","requestFullscreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","webkitExitFullscreen","msExitFullscreen","createElement","obj","_obj$attributes","el","type","attributes","attrTuple","_el$classList","classList","add","apply","_toConsumableArray","setAttribute","textContent","text","emitEvent","name","data","window","dispatchEvent","CustomEvent","detail","_objectSpread","controller","this","bubbles","_4_TEXT","_2_TEXT","GameController","query","config","_this","_classCallCheck","_defineProperty","refs","ancillaries","call","select","start","dpad","up","right","down","left","actions","buttons","btn","i","concat","root","querySelector","value","container","stage","mainControls","appendChild","_this2","Array","fill","map","x","actionsContainer","createContainer","createStage","createAncillaries","createMainControlsContainer","createDPad","createActionsContainer","createActions","createAllElements","insertAllElements","attachEventHandlers","createController","innerHTML","render","console","log"],"version":3,"file":"index.57e57955.js.map"}